## 課題の目的「Node.jsとPostgreSQLを使って、本のデータを保存・表示・更新・削除できるウェブアプリを作る」

# 課題 1
Node.js から PostgreSQL に接続するための準備をしてください。
>npm install express Express導入 済
>npm install pg pgパッケージ導入 済
>npm install cors CORS導入 済

■ 実装する内容
1. サーバーコード（index.js）に pg パッケージを読み込む 済
2. PostgreSQL 接続用の Pool インスタンスを作成する 済
3. 接続情報を設定する 済
```
user: "postgres"
host: "localhost"
database: "kinova_sample"（データベース講座で作成した DB 名）
password: 各自が設定したパスワード
port: 5432
```

## PostgreSQL コマンドの基本
- DBに接続するコマンド
```psql
psql -h ホスト名 -p ポート番号 -U ロール名 -d データベース名
```
- データベース一覧を取得するコマンド
```psql
\l
```
- データベースに接続するコマンド
```psql
\c データベース名
```

- テーブル一覧を取得するコマンド
```psql
\dt
```

- テーブルの構造を確認するコマンド
```psql
\d テーブル名
```

- テーブルのデータを取得するコマンド
```psql
SELECT * FROM テーブル名;	
```

## 課題1：データベースとつながる準備をする
やること：
1. pg というライブラリを読み込む（PostgreSQLとつなぐための道具）
2. Pool という接続用の箱を作る
3. 接続情報（ユーザー名・パスワードなど）を設定する
目的：
→ Node.jsからPostgreSQLに命令を送れるようにする
--- 
11090103 済

**11091132 BD一覧に"kinova_sample"というDBはあるが、テーブルが無い状態、テーブルを作成する必要があり**
> 嘘 存在しました。11091950

# 課題 2
フロントエンドから送信された本の情報をデータベースに保存する API を作成してください。

■API の仕様
エンドポイント: POST /api/books
受け取るデータ（JSON）:
```json
{
"title": "本のタイトル",
"author": "著者名",
"price": 価格（数値）
}
```
処理内容:
1. title、author、price が全て送信されているか確認
2. 不足がある場合はエラーを返す
3. books テーブルに INSERT する（プレースホルダを使用）
4. 成功したら追加したデータを含む JSON を返す

>DBエラー: error: 値"23423542343"は型integerの範囲外です
>PostgreSQLの INTEGER 型は最大で約21億まで。それを超えると「範囲外エラー」になる。対策は BIGINT に変更するか、入力値に上限を設ける。


## 課題2：本のデータを保存するAPIを作る
やること：
1. /api/books にPOSTされたデータ（タイトル・著者・価格）を受け取る
2. 3つともちゃんと入ってるか確認する
3. books テーブルに保存する（SQLのINSERT文）
4. 保存したデータを返す
目的：
→ フロントから送られた本の情報をDBに追加する
---

# 課題 3
books テーブルに保存されている全ての本の情報を取得する API を作成してください。

■API の仕様
エンドポイント: GET /api/books
処理内容:
1. books テーブルから全てのデータを SELECT する
2. 取得したデータを JSON 配列として返す
レスポンス形式:
```json
{
"ok": true,
"books": [ {...}, {...}, ... ]
}
```
## 課題3：本の一覧を取得するAPIを作る
やること：
1. books テーブルから全部の本を取り出す（SQLのSELECT文）
2. JSON形式で返す（{ ok: true, books: [...] }）
目的：
→ 登録された本を全部表示できるようにする
---
> npm install dotenv dotenv導入→ .envファイル＋,gitignoreファイル作成済み
11100059 課題２と３のレスポンス形式多分満たしてると思うので 済

# 課題 4
指定された ID の本の情報を更新する API を作成してください。

■API の仕様
エンドポイント: PUT /api/books/:id
URL パラメータ: id（更新対象の本の ID）
受け取るデータ（JSON）:
```json
{
"title": "新しいタイトル",
"author": "新しい著者名",
"price": 新しい価格
}
```
処理内容:
1. URL から id を取得する（req.params.id）
2. title、author、price が全て送信されているか確認
3. 指定された ID の本の情報を UPDATE する
4. 更新後のデータを返す

## 課題4：本の情報を更新するAPIを作る
やること：
1. URLから本のIDを受け取る（例：/api/books/3 → IDは3）
2. 新しいタイトル・著者・価格を受け取る
3. そのIDの本を更新する（SQLのUPDATE文）
4. 更新したデータを返す
目的：
→ 本の情報をあとから書き換えられるようにする
---
11100614 多分 要件満たしていると思う。

# 課題 5
指定された ID の本を削除する API を作成し、さらにフロントエンドから
全ての CRUD 操作を実行できるようにしてください。

■ サーバー側（index.js）
エンドポイント: DELETE /api/books/:id
URL パラメータ: id（削除対象の本の ID）
処理内容:
1. URL から id を取得する
2. 指定された ID の本を DELETE する
3. 削除された本のデータを返す

■ フロントエンド側（main.js）
本の一覧を取得して表示する機能
各本に「削除」ボタンを追加する機能
削除ボタンを押したら DELETE /api/books/:id を呼び出す

## 課題5：本を削除するAPIとフロントの機能を作る
• 	サーバー側（index.js）：
1. URLからIDを受け取る
2. そのIDの本を削除する（SQLのDELETE文）
3. 削除した本のデータを返す
• 	フロント側（main.js）：
1. 本の一覧を表示する
2. 各本に「削除」ボタンをつける
3. ボタンを押したら /api/books/:id にDELETEリクエストを送る
目的：
→ 本を削除できるようにする＋画面から操作できるようにする
---
11100622 多分 要件満たしていると思う。

**全体まとめ**
	  やること	            目的
1.	DBとNode.jsをつなぐ	  命令を送れるようにする
2.	本の追加API	          本を登録できるようにする
3.	本の取得API	          一覧表示できるようにする
4.	本の更新API	          情報を編集できるようにする
5.	本の削除API＋画面操作	 削除できて、画面でも操作できるようにする